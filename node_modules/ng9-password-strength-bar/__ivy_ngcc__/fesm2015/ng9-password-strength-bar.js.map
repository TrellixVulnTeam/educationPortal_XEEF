{"version":3,"file":"ng9-password-strength-bar.js","sources":["../../../projects/ng9-password-strength-bar/src/lib/ng9-password-strength-bar.component.ts","../../../projects/ng9-password-strength-bar/src/lib/ng9-password-strength-bar.module.ts","../../../projects/ng9-password-strength-bar/src/public-api.ts","../../../projects/ng9-password-strength-bar/src/ng9-password-strength-bar.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnChanges, Input, SimpleChange, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'ng9-password-strength-bar',\n  styles: [`\n    .strengthBar {\n      display: inline;\n      list-style: none;\n      margin: 0 0 0 15px;\n      padding: 0;\n      vertical-align: 2px;\n    }\n\n    .strengthBar .point {\n      background: #DDD;\n      border-radius: 2px;\n      display: inline-block;\n      height: 5px;\n      margin-right: 1px;\n      width: 20px;\n    }\n\n    .strengthBar .point:last-child {\n      margin: 0;\n    }\n    .pre {\n      white-space: pre;\n    }\n  `],\n  template: `\n    <div id=\"strength\" #strength>\n      <small>{{barLabel}}</small>\n      <ul id=\"strengthBar\" class=\"strengthBar\">\n        <li id=\"bar0\" class=\"point\" [style.background-color]=\"bar0\"></li>\n        <li class=\"point\" [style.background-color]=\"bar1\"></li>\n        <li class=\"point\" [style.background-color]=\"bar2\"></li>\n        <li class=\"point\" [style.background-color]=\"bar3\"></li>\n        <li class=\"point\" [style.background-color]=\"bar4\"></li>\n      </ul>\n      <small [hidden]=\"!strengths\" class=\"pre\">  {{strengthLabel}}</small>\n    </div>\n  `\n})\nexport class Ng9PasswordStrengthBarComponent implements OnChanges {\n  @Input() passwordToCheck: string;\n  @Input() barLabel: string;\n  @Input() barColors: Array<string>;\n  @Input() baseColor: string;\n  @Input() strengthLabels: Array<string>;\n  @Input() customThresholds: Array<number>;\n  @Output() onStrengthChanged: EventEmitter<number> = new EventEmitter<number>();\n\n  bar0: string;\n  bar1: string;\n  bar2: string;\n  bar3: string;\n  bar4: string;\n\n  strengthLabel: string;\n\n  private colors: Array<string>;\n  private thresholds: Array<number>;\n  strengths: Array<string>;\n  private defaultColors = ['#F00', '#F90', '#FF0', '#9F0', '#0F0'];\n  private defaultThresholds = [90, 70, 40, 20];\n  private defaultBaseColor = '#DDD';\n\n  private static measureStrength(pass: string) {\n    let score = 0;\n    // award every unique letter until 5 repetitions\n    const letters = {};\n    for (let i = 0; i < pass.length; i++) {\n      letters[pass[i]] = (letters[pass[i]] || 0) + 1;\n      score += 5.0 / letters[pass[i]];\n    }\n    // bonus points for mixing it up\n    const variations = {\n      digits: /\\d/.test(pass),\n      lower: /[a-z]/.test(pass),\n      upper: /[A-Z]/.test(pass),\n      nonWords: /\\W/.test(pass),\n    };\n\n    let variationCount = 0;\n    for (let check in variations) {\n      variationCount += (variations[check]) ? 1 : 0;\n    }\n    score += (variationCount - 1) * 10;\n    return Math.trunc(score);\n  }\n\n  constructor() {\n    this.colors = this.defaultColors;\n    this.thresholds = this.defaultThresholds;\n  }\n\n  private checkBarColors(): void {\n    // Accept custom colors if input is valid, otherwise the default colors will be used\n    if (this.barColors && this.barColors.length === 5) {\n      this.colors = this.barColors.slice();\n    } else {\n      this.colors = this.defaultColors;\n    }\n\n    this.strengths = this.strengthLabels && this.strengthLabels.length === 5 ? this.strengthLabels.slice() : null;\n    this.setStrengthLabel(0);\n\n    if (!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(this.baseColor)) {\n      this.baseColor = this.defaultBaseColor;\n    }\n  }\n\n  private checkThresholds(): void {\n    if (this.customThresholds && this.customThresholds.length === 4) {\n      this.thresholds = this.customThresholds.slice();\n    } else {\n      this.thresholds = this.defaultThresholds;\n    }\n  }\n\n  private getColor(score: number) {\n    let idx = 0;\n    if (score > this.thresholds[0]) {\n      idx = 4;\n    } else if (score > this.thresholds[1]) {\n      idx = 3;\n    } else if (score >= this.thresholds[2]) {\n      idx = 2;\n    } else if (score >= this.thresholds[3]) {\n      idx = 1;\n    }\n    return {\n      idx: idx + 1,\n      col: this.colors[idx]\n    };\n  }\n\n  getStrengthIndexAndColor(password: string) {\n    return this.getColor(Ng9PasswordStrengthBarComponent.measureStrength(password));\n  }\n\n  ngOnChanges(changes: { [propName: string]: SimpleChange }): void {\n    if (!changes['passwordToCheck']) {\n      return;\n    }\n    const password = changes['passwordToCheck'].currentValue;\n    this.checkBarColors();\n    this.checkThresholds();\n    this.setBarColors(5, this.baseColor);\n    let strength = 0;\n    if (password) {\n      const c = this.getStrengthIndexAndColor(password);\n      strength = c.idx - 1;\n      this.setStrengthLabel(strength);\n      this.setBarColors(c.idx, c.col);\n    }\n    this.onStrengthChanged.emit(strength);\n  }\n\n  private setBarColors(count: number, col: string) {\n    for (let _n = 0; _n < count; _n++) {\n      this['bar' + _n] = col;\n    }\n  }\n  private setStrengthLabel(index: number) {\n    if (this.strengths) {\n      this.strengthLabel = this.strengths[index];\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Ng9PasswordStrengthBarComponent } from './ng9-password-strength-bar.component';\n\n\n\n@NgModule({\n  declarations: [Ng9PasswordStrengthBarComponent],\n  imports: [\n  ],\n  exports: [Ng9PasswordStrengthBarComponent]\n})\nexport class Ng9PasswordStrengthBarModule { }\n","/*\n * Public API Surface of ng9-password-strength-bar\n */\n\nexport * from './lib/ng9-password-strength-bar.component';\nexport * from './lib/ng9-password-strength-bar.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}